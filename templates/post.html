{% extends "layout.html" %}

{% block title %}{{ post.title }}{% endblock %}
{% block og_description %}{{ post.meta_description }}{% endblock %}
{% block og_type %}article{% endblock %}
{% block og_image %}{{ post.thumbnail }}{% endblock %}
{% block meta_description %}{{ post.meta_description }}{% endblock %}
{% block meta_robots %}index,follow{% endblock %}

{% block head_extra %}
<meta name="date" content="{{ post.seo_date }}">
<meta property="article:published_time" content="{{ post.seo_date }}">
<meta property="article:author" content="{{ post.creator }}">
<meta property="article:modified_time" content="{{ post.updated }}">
{% endblock %}

{% block content %}
    <h1>{{ post.title }}</h1>
    
    <div class="post-content-meta">
  <p>
    <a href="/kategorie/{{ post.category }}">{{ post.category }}</a> 
    | {{ post.created }} 
    | {{ post.creator }} 
    | ğŸ‘ {{ post.stats.views_total }} wyÅ›wietleÅ„ 
    | {{ post.stats.comments_total  }} komentarzy
    | {{ post.reading_time }} minut(y) czytania
    | <a href="#" class="share-link" data-modal="share-modal-{{ post.id }}">UdostÄ™pnij</a>
  </p>
</div>

    {% if post.thumbnail %}
        <img class="post-inside-thumbnail"
             src="{{ post.thumbnail }}"
             alt="Thumbnail {{ post.title }}"
             loading="eager"
             decoding="async">
    {% endif %}

    {% include "partials/toc.html" %}

    <div class="post-content">
        {{ lazy_images(post.content) | safe }}
    </div>

    
    <div class="reactions" data-post-id="{{ post.id }}" data-active="{{ active_reaction or '' }}">
        <button class="reaction-btn" data-type="like" type="button">ğŸ‘ <span class="cnt">{{ (post.stats.reactions.like or 0) if post.stats.reactions else 0 }}</span></button>
        <button class="reaction-btn" data-type="love" type="button">â¤ï¸ <span class="cnt">{{ (post.stats.reactions.love or 0) if post.stats.reactions else 0 }}</span></button>
        <button class="reaction-btn" data-type="laugh" type="button">ğŸ˜‚ <span class="cnt">{{ (post.stats.reactions.laugh or 0) if post.stats.reactions else 0 }}</span></button>
        <button class="reaction-btn" data-type="fire" type="button">ğŸ”¥ <span class="cnt">{{ (post.stats.reactions.fire or 0) if post.stats.reactions else 0 }}</span></button>
        <button class="reaction-btn" data-type="wow" type="button">ğŸ˜® <span class="cnt">{{ (post.stats.reactions.wow or 0) if post.stats.reactions else 0 }}</span></button>
        <a class="btn share-link" href="#" data-modal="share-modal-{{ post.id }}">UdostÄ™pnij</a>
    </div>




    <hr style="color: #f7c920">
    <br>

    <div id="comments" class="comments-container">
        <div class="comments-section">
            {% include "partials/comments-section.html" %}
            
            {% if comments_total_pages and comments_total_pages > 1 %}
                <div class="comments-pagination">
                {% if comments_page > 1 %}
                    <a href="?cpage={{ comments_page - 1 }}#comments">â† Poprzednia</a>
                {% endif %}

                <span>Strona {{ comments_page }} z {{ comments_total_pages }}</span>

                {% if comments_page < comments_total_pages %}
                    <a href="?cpage={{ comments_page + 1 }}#comments">NastÄ™pna â†’</a>
                {% endif %}
                </div>
            {% endif %}
        </div>

        <div class="add-comment">
            {% include "partials/add_comment.html" %}
        </div>
    </div>

{% endblock %}

{% block modals %}
    {% include "partials/share-modal.html" %}
{% endblock %}
